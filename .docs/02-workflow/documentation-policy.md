# 設計記録の方針（Documentation Policy）

## テストと実装が仕様書

**原則**: ドキュメントではなく、コードが真実

1. **テストが仕様書**:

   - テストケース = 実行可能な仕様

   - テストを読めば、クラスの振る舞いが分かる

   - テストが通る = 仕様を満たしている

2. **実装が設計書**:

   - docstring = 設計判断、責務、制約

   - 型アノテーション = データ構造

   - クラス構成 = アーキテクチャ

3. **PRが設計の文脈**:

   - PR description = なぜこの設計にしたか

   - コミットメッセージ = なぜこの実装にしたか

## 記録先（5つに限定）

- **テスト**: クラスの振る舞い（実行可能な仕様）

- **コードのdocstring**: 設計判断、責務、制約

- **PR description**: 設計の背景、他の案、トレードオフ、tasklist

- **design.md**: アーキテクチャ鳥瞰図のみ（50-100行）

- **コミットメッセージ**: なぜこの実装にしたか

**注**: ドメインごとの設計概要（`src/*/README.md`）は、ドメイン層の実装完了後（Phase 1以降）に追加予定です。

## 原則

**設計情報は上記5つの場所にのみ記録する。それ以外の場所には記録しない。**

特に以下を禁止:

- 設計専用のディレクトリ作成（`_docs/`, `tmp/`, `docs/`, `design/`等）

- 設計専用のファイル追加（`architecture.md`, `decisions.md`等）

- ローカルのみの設計メモ（チーム共有されない情報）

## 検索方法

```bash

# PRで設計判断を探す

gh pr list --search "domain separation"

# コミットで探す

git log --grep="GeneratedResult"

# コードで探す

rg "class GeneratedResult" --type py -A 20

```

